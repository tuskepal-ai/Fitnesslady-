<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Lady — Női edzésterv</title>

  <style>
    :root{
      --bg:#07060b;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.55);
      --brand: #ff4fd8;
      --brand2:#b84bff;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --r: 18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 900px at 30% 10%, rgba(255,79,216,.30), transparent 60%),
                  radial-gradient(900px 700px at 70% 30%, rgba(184,75,255,.22), transparent 55%),
                  linear-gradient(180deg, #090611 0%, #06050a 100%);
      color: var(--text);
      min-height: 100vh;
    }

    a{ color:inherit; text-decoration:none; }
    .wrap{ width:min(1120px, 92vw); margin:0 auto; padding: 18px 0 90px; }

    /* top */
    .topbar{
      position: sticky; top:0; z-index:30;
      backdrop-filter: blur(10px);
      background: rgba(0,0,0,.25);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .topbar .inner{
      width:min(1120px, 92vw);
      margin:0 auto;
      padding: 14px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .dot{
      width:10px;height:10px;border-radius:99px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--brand) 40%, transparent 70%),
                  linear-gradient(90deg, var(--brand), var(--brand2));
      box-shadow: 0 0 22px rgba(255,79,216,.55);
    }
    nav{ display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
    nav a{
      font-size:14px;
      color: var(--muted);
      padding:8px 10px;
      border-radius: 12px;
    }
    nav a:hover{ background: rgba(255,255,255,.06); color: var(--text); }

    .cta{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .pill{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight:700;
      font-size:14px;
      cursor:pointer;
      transition: transform .08s ease, background .15s ease;
      user-select:none;
    }
    .pill:hover{ background: rgba(255,255,255,.09); }
    .pill:active{ transform: translateY(1px); }

    .pill.primary{
      border: none;
      background: linear-gradient(90deg, var(--brand), var(--brand2));
      box-shadow: 0 10px 34px rgba(255,79,216,.18);
    }

    /* hero */
    .hero{
      margin-top: 22px;
      border-radius: calc(var(--r) + 10px);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(255,79,216,.25), transparent 55%),
        radial-gradient(700px 520px at 80% 35%, rgba(184,75,255,.20), transparent 55%),
        rgba(255,255,255,.04);
    }
    .hero-inner{
      padding: 28px 22px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items:center;
    }
    .hero h1{
      margin:0;
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.05;
      letter-spacing:-.5px;
    }
    .hero p{
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 60ch;
    }
    .hero-actions{ margin-top: 14px; display:flex; gap:10px; flex-wrap:wrap; }
    .hero-img{
      display:flex;
      justify-content:flex-end;
    }
    .hero-img img{
      width:min(360px, 100%);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      opacity:.92;
    }

    @media (max-width: 860px){
      .hero-inner{ grid-template-columns: 1fr; }
      .hero-img{ justify-content:flex-start; }
    }

    /* section */
    section{ margin-top: 34px; }
    .section-title{
      font-size: 30px;
      margin: 0 0 10px;
      letter-spacing:-.3px;
    }
    .section-sub{ margin:0 0 16px; color: var(--muted); }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }
    @media (max-width: 900px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      border-radius: var(--r);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      padding: 16px;
    }
    .card h3{ margin:0 0 8px; font-size: 18px; }
    .card ul{ margin:0; padding-left: 18px; color: var(--muted); }
    .card li{ margin: 6px 0; }

    /* reviews */
    .reviews-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .reviews-actions{ display:flex; gap:10px; flex-wrap:wrap; }
    .reviews-shell{
      border: 1px dashed rgba(255,255,255,.16);
      background: rgba(255,255,255,.03);
      border-radius: var(--r);
      padding: 14px;
    }

    .reviews-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 12px;
    }
    @media (max-width: 980px){ .reviews-grid{ grid-template-columns: 1fr; } }

    .review-card{
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      border-radius: var(--r);
      padding: 14px;
    }
    .review-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 8px;
    }
    .stars{
      font-size: 14px;
      letter-spacing: 1px;
      white-space:nowrap;
      color: rgba(255,255,255,.85);
    }
    .meta{
      font-size: 12px;
      color: var(--muted2);
      white-space:nowrap;
    }
    .review-text{
      margin:0;
      color: var(--text);
      line-height:1.35;
      font-size: 14px;
      word-break: break-word;
    }

    .reviews-status{
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      font-size: 13px;
    }

    /* footer */
    footer{
      margin-top: 40px;
      padding-top: 18px;
      border-top: 1px solid rgba(255,255,255,.08);
      color: rgba(255,255,255,.55);
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <span class="dot"></span>
        <span>Fitness Lady</span>
      </div>

      <nav>
        <a href="#csomagok">Csomagok</a>
        <a href="#hogyan">Hogyan működik?</a>
        <a href="#velemenyek">Vélemények</a>
        <a href="#kapcsolat">Kapcsolat</a>
      </nav>

      <div class="cta">
        <a class="pill primary" href="#kapcsolat">Ingyenes konzultáció</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="hero">
      <div class="hero-inner">
        <div>
          <h1>Edzésterv, amit tényleg lehet tartani.</h1>
          <p>Nem sablon. Nem kompromisszum. Női edzésterv formához, erőhöz, jobb közérzethez — neked, az időbeosztásodhoz igazítva.</p>
          <div class="hero-actions">
            <a class="pill primary" href="#csomagok">Csomagok</a>
            <a class="pill" href="https://tally.so/r/LZpRXG" target="_blank" rel="noopener">Írj véleményt</a>
          </div>
        </div>
        <div class="hero-img">
          <img src="/hero.png" alt="Fitness Lady" />
        </div>
      </div>
    </div>

    <section id="csomagok">
      <h2 class="section-title">Csomagok</h2>
      <p class="section-sub">Válassz a célod és időbeosztásod alapján. Prémium érzet, tiszta struktúra, stabil rendszer.</p>

      <div class="grid">
        <div class="card">
          <h3>Alap csomag</h3>
          <ul>
            <li>Személyre szabott edzésterv</li>
            <li>Alap progresszió</li>
            <li>Egyszerű, tartható struktúra</li>
          </ul>
        </div>

        <div class="card">
          <h3>Edzés + táplálkozás</h3>
          <ul>
            <li>Edzésterv + táplálkozási rendszer</li>
            <li>Rendszeres finomhangolás</li>
            <li>Stabil energiák, jobb közérzet</li>
          </ul>
        </div>

        <div class="card">
          <h3>Maximális támogatás</h3>
          <ul>
            <li>Teljes személyre szabás</li>
            <li>Gyakori visszajelzés / követés</li>
            <li>Formálódás + erő fókusz</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="hogyan">
      <h2 class="section-title">Hogyan működik?</h2>
      <p class="section-sub">1) Konzultáció → 2) Terv → 3) Követés és finomhangolás. Nem túltolás, hanem fenntartható rendszer.</p>

      <div class="grid">
        <div class="card">
          <h3>1. Cél + állapot</h3>
          <ul>
            <li>Kiindulópont felmérés</li>
            <li>Időbeosztás és preferenciák</li>
          </ul>
        </div>
        <div class="card">
          <h3>2. Terv</h3>
          <ul>
            <li>Heti edzésstruktúra</li>
            <li>Progresszió lépésről-lépésre</li>
          </ul>
        </div>
        <div class="card">
          <h3>3. Finomhangolás</h3>
          <ul>
            <li>Visszajelzés</li>
            <li>Terhelés, regeneráció, ritmus</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="velemenyek">
      <div class="reviews-head">
        <div>
          <h2 class="section-title">Vélemények</h2>
          <p class="section-sub" style="margin-bottom:0">Csak a jóváhagyott („igen”) vélemények jelennek meg.</p>
        </div>

        <div class="reviews-actions">
          <a class="pill primary" href="https://tally.so/r/LZpRXG" target="_blank" rel="noopener">Írj véleményt</a>
          <button class="pill" id="btnRefresh" type="button">Frissítés</button>
        </div>
      </div>

      <div class="reviews-shell">
        <div class="badge" id="reviewsBadge">⏳ Betöltés…</div>

        <div class="reviews-grid" id="reviewsGrid" aria-live="polite"></div>

        <div class="reviews-status" id="reviewsStatus"></div>
      </div>
    </section>

    <section id="kapcsolat">
      <h2 class="section-title">Kapcsolat</h2>
      <p class="section-sub">Ide jöhet a kapcsolat form / időpontfoglalás / WhatsApp gomb.</p>
      <div class="card">
        <h3>Ingyenes konzultáció</h3>
        <p style="margin:0;color:var(--muted)">Írj üzenetet és megbeszéljük a célokat, a kereteket, és hogy melyik csomag illik hozzád.</p>
      </div>
    </section>

    <footer>
      © 2026 Fitness Lady
    </footer>
  </div>

  <script>
    // ====== BEÁLLÍTÁSOK ======
    const TALLY_URL = "https://tally.so/r/LZpRXG";

    // ✅ A TE CSV LINKED:
    const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSlH-tTccqy_yetPGUaqZ3wULe74ZVSzCX6wA7kZV-iWDu0l1I4_IBjTFggNS2xpZFqQwTXj3mnZeag/pub?gid=0&single=true&output=csv";

    // Oszlopnevek (a Google Sheet fejléce alapján)
    const COL_TEXT = "Véleményed";
    const COL_APPROVED = "Megjelenhet?";
    const COL_RATING = "Mennyire"; // ha nincs, akkor nem baj
    const APPROVED_VALUE = "igen";

    // ====== CSV PARSER (egyszerű, de kezeli az idézőjeles mezőket is) ======
    function parseCSV(text){
      const rows = [];
      let row = [];
      let cur = "";
      let inQuotes = false;

      for (let i=0; i<text.length; i++){
        const c = text[i];
        const next = text[i+1];

        if (c === '"' ){
          if (inQuotes && next === '"'){ cur += '"'; i++; }
          else { inQuotes = !inQuotes; }
          continue;
        }

        if (!inQuotes && c === ","){
          row.push(cur);
          cur = "";
          continue;
        }

        if (!inQuotes && (c === "\n")){
          row.push(cur);
          rows.push(row);
          row = [];
          cur = "";
          continue;
        }

        if (c !== "\r") cur += c;
      }

      if (cur.length || row.length){
        row.push(cur);
        rows.push(row);
      }

      return rows;
    }

    function normalize(s){
      return (s ?? "").toString().trim().toLowerCase();
    }

    function starString(n){
      const num = Number(n);
      if (!Number.isFinite(num) || num <= 0) return "";
      const clamped = Math.max(1, Math.min(5, Math.round(num)));
      return "★★★★★".slice(0, clamped) + "☆☆☆☆☆".slice(0, 5 - clamped);
    }

    function safeText(s){
      return (s ?? "").toString().trim();
    }

    function renderReviews(items){
      const grid = document.getElementById("reviewsGrid");
      grid.innerHTML = "";

      if (!items.length){
        grid.innerHTML = `<div class="review-card" style="grid-column:1/-1">
          <p class="review-text" style="color: rgba(255,255,255,.78); margin:0;">
            Még nincs jóváhagyott vélemény.
          </p>
        </div>`;
        return;
      }

      for (const it of items){
        const card = document.createElement("div");
        card.className = "review-card";

        const stars = it.stars ? `<div class="stars">${it.stars}</div>` : `<div></div>`;
        const meta = it.date ? `<div class="meta">${it.date}</div>` : `<div class="meta"></div>`;

        card.innerHTML = `
          <div class="review-top">
            ${stars}
            ${meta}
          </div>
          <p class="review-text">${escapeHTML(it.text)}</p>
        `;
        grid.appendChild(card);
      }
    }

    function escapeHTML(str){
      return (str ?? "").toString()
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    async function loadReviews(){
      const badge = document.getElementById("reviewsBadge");
      const status = document.getElementById("reviewsStatus");

      badge.textContent = "⏳ Betöltés…";
      status.textContent = "";

      try{
        // cache-buster
        const url = SHEET_CSV_URL + (SHEET_CSV_URL.includes("?") ? "&" : "?") + "t=" + Date.now();
        const res = await fetch(url, { method:"GET" });
        if (!res.ok) throw new Error("CSV letöltés sikertelen: " + res.status);

        const csvText = await res.text();

        const rows = parseCSV(csvText);
        if (!rows.length) throw new Error("Üres CSV.");

        const header = rows[0].map(h => h.trim());
        const idxText = header.indexOf(COL_TEXT);
        const idxApproved = header.indexOf(COL_APPROVED);
        const idxRating = header.indexOf(COL_RATING);
        const idxDate = header.findIndex(h => normalize(h) === "submitted at" || normalize(h) === "submitted" || normalize(h) === "submitted_at" || normalize(h) === "submitted at ");

        if (idxText === -1) throw new Error(`Hiányzó oszlop: "${COL_TEXT}"`);
        if (idxApproved === -1) throw new Error(`Hiányzó oszlop: "${COL_APPROVED}"`);

        const items = [];
        for (let i=1; i<rows.length; i++){
          const r = rows[i];
          if (!r || !r.length) continue;

          const approved = normalize(r[idxApproved]);
          if (approved !== APPROVED_VALUE) continue;

          const text = safeText(r[idxText]);
          if (!text) continue;

          const rating = idxRating !== -1 ? safeText(r[idxRating]) : "";
          const stars = rating ? starString(rating) : "";

          const dateRaw = idxDate !== -1 ? safeText(r[idxDate]) : "";
          const date = dateRaw ? dateRaw.replace("T"," ").replace("Z","") : "";

          items.push({ text, stars, date });
        }

        // legfrissebb elöl (ha van dátum)
        items.sort((a,b) => (b.date || "").localeCompare(a.date || ""));

        renderReviews(items);

        badge.textContent = "✅ Betöltve";
        status.textContent = `${items.length} jóváhagyott vélemény megjelenítve.`;

      }catch(err){
        console.error(err);
        badge.textContent = "⚠️ Nem sikerült betölteni";
        status.textContent = "Ellenőrizd a publikus CSV linket és az oszlopneveket a táblában.";
        renderReviews([]);
      }
    }

    document.getElementById("btnRefresh").addEventListener("click", loadReviews);

    // initial
    loadReviews();
  </script>
</body>
</html>
