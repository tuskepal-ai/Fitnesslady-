<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Lady ‚Äî N≈ëi edz√©sprogramok</title>
  <meta name="description" content="N≈ëi edz√©sprogramok, amiket t√©nyleg lehet tartani. Szem√©lyre szabott edz√©s √©s t√°pl√°lkoz√°s ‚Äî a te √©letedhez igaz√≠tva." />

  <style>
    :root{
      --bg:#07060b;

      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);

      --pink:#ff4fd8;
      --pink2:#b14cff;

      --gold:#ffd38a;

      --radius:22px;
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --max: 1180px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    html{ scroll-behavior:smooth; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 30% 10%, rgba(255,79,216,.16), transparent 60%),
        radial-gradient(1000px 700px at 75% 20%, rgba(177,76,255,.14), transparent 60%),
        radial-gradient(1000px 700px at 60% 90%, rgba(255,211,138,.06), transparent 55%),
        var(--bg);
      color:var(--text);
      overflow-x:hidden;
    }

    /* ===== FULL-PAGE BACKGROUND: hero.png v√©gig az eg√©sz oldalon ===== */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      z-index: -1;
      background-image: url("/hero.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transform: translateZ(0);
    }

    a{ color:inherit; text-decoration:none; }
    button{ font:inherit; }

    /* ========= Layout helpers ========= */
    .container{
      width: min(var(--max), 92vw);
      margin: 0 auto;
    }
    .section{
      padding: clamp(44px, 6vw, 76px) 0;
      background: rgba(7,6,11,.72); /* olvashat√≥s√°g a full-page bg felett */
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .section-title{
      margin:0 0 10px;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      font-size: clamp(28px, 3.4vw, 40px);
      letter-spacing: -.4px;
    }
    .section-sub{
      margin:0 0 22px;
      color:var(--muted);
      max-width: 78ch;
      line-height: 1.6;
      font-size: 15px;
    }

    /* ========= Topbar ========= */
    .topbar{
      position: fixed;
      top:0; left:0; right:0;
      z-index: 50;
      background: rgba(8,6,12,.55);
      border-bottom: 1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .topbar-inner{
      height: 64px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      letter-spacing:.2px;
      white-space: nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #ffd0f6, var(--pink));
      box-shadow: 0 0 18px rgba(255,79,216,.7);
      flex: 0 0 auto;
    }

    .nav{
      display:flex;
      align-items:center;
      gap: 18px;
      color: var(--muted);
      font-size: 14px;
      font-weight: 650;
    }
    .nav a{
      position: relative;
      padding: 10px 6px;
      opacity:.92;
    }
    .nav a:hover{ opacity:1; color: var(--text); }

    /* gold underline animation */
    .nav a::after{
      content:"";
      position:absolute;
      left: 8px; right: 8px; bottom: 6px;
      height: 2px;
      border-radius: 99px;
      background: linear-gradient(90deg, rgba(255,215,140,0), rgba(255,215,140,.9), rgba(255,215,140,0));
      transform: scaleX(0);
      transform-origin: left;
      opacity: 0;
      transition: transform .28s ease, opacity .28s ease;
    }
    .nav a:hover::after,
    .nav a.is-active::after{
      transform: scaleX(1);
      opacity: 1;
    }

    .cta-pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 14px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#120613;
      font-weight: 900;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 14px 30px rgba(255,79,216,.22);
      white-space: nowrap;
    }

    .menu-btn{
      width: 40px; height: 40px; border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text);
      display:none;
      align-items:center; justify-content:center;
    }

    /* ========= Hero ========= */
    .hero{
      position: relative;
      min-height: 100vh;
      min-height: 100dvh;
      padding-top: 64px;
      display:flex;
      align-items:center;
      overflow: hidden;
    }

    /* overlay a hero felett (olvashat√≥s√°g) */
    .hero-overlay{
      position:absolute; inset:0;
      background:
        radial-gradient(1100px 700px at 22% 42%, rgba(10,7,14,.18), rgba(10,7,14,.56) 62%, rgba(10,7,14,.72) 100%),
        linear-gradient(to right, rgba(10,7,14,.48), rgba(10,7,14,.30) 48%, rgba(10,7,14,.22));
      pointer-events:none;
    }

    .hero-wrap{
      position: relative;
      width: min(var(--max), 92vw);

      /* ‚úÖ TARTALOM BALRA (nem a h√°tt√©r) */
      margin-left: clamp(14px, 4vw, 64px);
      margin-right: auto;

      padding: 38px 0 56px;
    }

    .hero-grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 18px;
      align-items: start;
    }

    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      color: var(--muted);
      font-size: 13px;
      width: fit-content;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    h1{
      margin: 14px 0 12px;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      font-weight: 700;
      line-height: 1.05;
      font-size: clamp(34px, 4.2vw, 62px);
      letter-spacing: -0.8px;
      text-shadow: 0 10px 40px rgba(0,0,0,.55);
    }

    .lead{
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 15.5px;
      line-height: 1.65;
      max-width: 62ch;
      text-shadow: 0 10px 30px rgba(0,0,0,.45);
    }

    .hero-actions{
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
      margin: 14px 0 10px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 12px 16px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(20,12,26,.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: var(--text);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      cursor:pointer;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.20); }
    .btn.primary{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#140813;
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 18px 46px rgba(255,79,216,.26);
      font-weight: 900;
    }
    .btn.ghost{ background: rgba(255,255,255,.06); }

    .meta-row{
      display:flex; flex-wrap:wrap;
      gap: 10px;
      margin-top: 10px;
      color: var(--muted2);
      font-size: 13px;
    }
    .meta-pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 9px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* ========= Glass cards + hover/tap neon glow (GOLD SWEEP NINCS) ========= */
    .glass{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }

    .interactive{
      position: relative;
      overflow: hidden;
      transition: transform .30s cubic-bezier(.2,.8,.2,1), box-shadow .30s ease, border-color .30s ease;
      will-change: transform;
    }

    /* neon glow layer (hover/tap) */
    .interactive::before{
      content:"";
      position:absolute; inset:-3px;
      border-radius: inherit;
      background:
        radial-gradient(700px 240px at 12% 0%, rgba(255,79,216,.32), transparent 55%),
        radial-gradient(700px 260px at 90% 20%, rgba(177,76,255,.26), transparent 60%);
      opacity: 0;
      filter: blur(6px);
      transition: opacity .30s ease;
      pointer-events:none;
    }

    .interactive:hover,
    .interactive:focus-visible,
    .interactive.is-active{
      transform: translateY(-6px);
      border-color: rgba(255,255,255,.16);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
    }
    .interactive:hover::before,
    .interactive:focus-visible::before,
    .interactive.is-active::before{
      opacity: 1;
    }

    /* ========= ‚ÄúR√≥lam‚Äù + ‚ÄúMit kapsz pontosan?‚Äù ========= */
    .hero-stack{
      display:grid;
      gap: 14px;
      align-content: start;
    }

    .about-card, .what-card{ padding: 18px; }
    .about-head{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:10px;
    }
    .tag{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color: var(--muted);
      white-space: nowrap;
      font-weight: 800;
    }
    .about-title{
      margin:0;
      font-size: 16px;
      font-weight: 900;
      letter-spacing:.2px;
    }
    .about-text{
      margin:0;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.6;
    }

    .what-grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 10px;
    }
    .mini{
      padding: 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.10);
    }
    .mini b{ display:block; margin-bottom:6px; font-size: 13px; }
    .mini span{ display:block; color:var(--muted); font-size: 12.8px; line-height:1.45; }

    /* ========= Packages ========= */
    .packages{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    @media (max-width: 980px){
      .packages{ grid-template-columns: 1fr; }
    }
    .pkg{ padding: 18px; position: relative; }
    .pkg-top{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom: 10px;
    }
    .pkg h3{
      margin:0;
      font-size: 22px;
      font-family: ui-serif, Georgia, serif;
    }
    .pkg p{
      margin: 0 0 12px;
      color: var(--muted);
      line-height: 1.6;
      font-size: 13.5px;
    }
    .list{ margin:0; padding:0; list-style:none; display:grid; gap:8px; }
    .list li{
      display:flex; align-items:flex-start; gap:10px;
      color: var(--muted);
      font-size: 13px;
    }
    .check{
      width: 18px; height: 18px; border-radius: 6px;
      background: rgba(255,79,216,.18);
      border: 1px solid rgba(255,79,216,.30);
      box-shadow: 0 0 22px rgba(255,79,216,.16);
      flex: 0 0 auto;
      margin-top: 1px;
      position:relative;
    }
    .check:after{
      content:"";
      position:absolute;
      left: 5px; top: 4px;
      width: 6px; height: 9px;
      border-right: 2px solid rgba(255,255,255,.85);
      border-bottom: 2px solid rgba(255,255,255,.85);
      transform: rotate(40deg);
    }

    .pkg-actions{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 14px;
    }
    .buy-btn{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#140813;
      border:none;
      box-shadow: 0 18px 46px rgba(255,79,216,.20);
      font-weight: 900;
    }
    .info-btn{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      color: var(--text);
      font-weight: 850;
    }

    /* ========= Reviews ========= */
    .reviews-head{
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }
    .reviews-actions{ display:flex; gap:10px; flex-wrap:wrap; }

    .rating{
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .rating .star{
      font-size:16px;
      line-height:1;
      color: rgba(255,255,255,.25);
      transform: translateY(0) scale(1);
      transition: transform .25s ease, filter .25s ease, color .25s ease;
      transition-delay: calc(var(--i) * 18ms);
    }
    .rating .rating-text{
      font-size: 13px;
      opacity: .78;
      font-weight: 850;
      letter-spacing: .2px;
    }
    .rating.is-anim .star,
    .rating:hover .star{
      color: rgba(255, 215, 130, .95);
      filter: drop-shadow(0 0 10px rgba(255, 200, 120, .35));
    }
    .rating.is-anim .star{
      animation: starPop .55s cubic-bezier(.2,.8,.2,1) both;
      animation-delay: calc(var(--i) * 40ms);
    }
    @keyframes starPop{
      0%   { transform: translateY(2px) scale(.92); filter: none; }
      45%  { transform: translateY(-2px) scale(1.10); }
      100% { transform: translateY(0) scale(1.00); }
    }

    .review-carousel{ border-radius: var(--radius); }
    .review-track{
      display:flex;
      gap:14px;
      padding: 10px;
      scroll-snap-type: x mandatory;
      overflow-x:auto;
      scroll-behavior:smooth;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .review-track::-webkit-scrollbar{ display:none; }

    .review-card{
      min-width: min(440px, 86vw);
      scroll-snap-align: start;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      padding: 16px;
      position: relative;
      overflow:hidden;
    }
    .review-card .top{
      display:flex;
      justify-content: space-between;
      gap: 12px;
      align-items:center;
      color: var(--muted2);
      font-size: 12px;
      margin-bottom: 10px;
      white-space: nowrap;
    }
    .review-card .text{
      margin: 0 0 12px;
      color: rgba(255,255,255,.92);
      line-height: 1.55;
      font-size: 14px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .review-card .stars{
      color: rgba(255,255,255,.86);
      letter-spacing: 1px;
      font-size: 13px;
    }

    .review-dots{
      display:flex;
      justify-content:center;
      gap:8px;
      padding: 8px 0 2px;
    }
    .review-dot{
      width:7px; height:7px;
      border-radius:999px;
      background: rgba(255,255,255,.18);
      transition: transform .2s ease, background .2s ease;
    }
    .review-dot.is-active{
      background: rgba(255, 215, 130, .9);
      transform: scale(1.35);
    }

    /* ========= Scroll reveal (smooth: opacity + transform only) ========= */
    .reveal{
      opacity: 0;
      transform: translateY(16px) scale(.995);
      transition: opacity .75s ease,
                  transform .75s cubic-bezier(.2,.8,.2,1);
      will-change: opacity, transform;
    }
    .reveal.is-visible{
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .reveal[data-delay="1"]{ transition-delay: 80ms; }
    .reveal[data-delay="2"]{ transition-delay: 160ms; }
    .reveal[data-delay="3"]{ transition-delay: 240ms; }

    /* ========= PERFORMANCE: scroll k√∂zben marad az √ºveg, csak glow/transition pihen ========= */
    body.is-scrolling .interactive::before{
      opacity: 0 !important;
    }
    body.is-scrolling .interactive{
      transition: none !important;
    }
    body.is-scrolling .glass,
    body.is-scrolling .review-card{
      box-shadow: 0 10px 30px rgba(0,0,0,.38) !important;
    }

    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      .reveal{ opacity:1; transform:none; transition:none; }
      .review-track{ scroll-behavior:auto; }
      .rating .star{ transition:none; animation:none !important; }
      .interactive, .btn{ transition:none; }
    }

    /* ========= Responsive ========= */
    @media (max-width: 980px){
      .hero-grid{ grid-template-columns: 1fr; }
      .menu-btn{ display:inline-flex; }
      .nav{ display:none; }
      .what-grid{ grid-template-columns: 1fr; }
      .hero-wrap{ margin-left: auto; margin-right: auto; }
    }

    /* ========= AFSZ MODAL (only shows on click) ========= */
    .modal-overlay{
      position: fixed;
      inset: 0;
      z-index: 80;
      background: rgba(0,0,0,.58);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
    }
    .modal-overlay.is-open{ display: flex; }

    .modal{
      width: min(980px, 94vw);
      max-height: min(78vh, 720px);
      border-radius: var(--radius);
      overflow: hidden;
      position: relative;
    }

    .modal-header{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(10,8,14,.45);
    }
    .modal-title{
      margin:0;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      font-size: 20px;
      letter-spacing: -.2px;
    }
    .modal-close{
      width: 40px; height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.9);
      cursor: pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .modal-body{
      padding: 16px;
      overflow: auto;
      max-height: calc(min(78vh, 720px) - 64px);
      background: rgba(7,6,11,.38);
    }

    /* modal typography consistent with site */
    .modal-body h3{
      margin: 16px 0 8px;
      font-size: 16px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .modal-body p{
      margin: 0 0 10px;
      color: var(--muted);
      line-height: 1.6;
      font-size: 13.5px;
    }

    /* prevent background scroll when modal open */
    body.modal-lock{
      overflow: hidden;
      touch-action: none;
    }
  </style>
</head>

<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="container topbar-inner">
      <a class="brand" href="#top" aria-label="Fitness Lady">
        <span class="dot"></span>
        <span>Fitness Lady</span>
      </a>

      <nav class="nav" aria-label="F≈ëmen√º">
        <a href="#csomagok">Csomagok</a>
        <a href="#hogyan">Hogyan m≈±k√∂dik?</a>
        <a href="#velemenyek">V√©lem√©nyek</a>
        <a href="#faq">AFSZ</a>
      </nav>

      <div style="display:flex; align-items:center; gap:10px;">
        <button class="menu-btn" id="menuBtn" aria-label="Men√º">‚ò∞</button>
        <a class="cta-pill" href="#kapcsolat">Ingyenes konzult√°ci√≥</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main id="top" class="hero">
    <div class="hero-overlay" aria-hidden="true"></div>

    <div class="hero-wrap">
      <div class="hero-grid">
        <div class="reveal">
          <div class="badge">‚ú® Pr√©mium edz√©s ‚Ä¢ n≈ëkre hangolva</div>

          <h1>N≈ëi edz√©sprogramok, <br>amiket t√©nyleg lehet tartani.</h1>

          <p class="lead">
            Nem sablon. Nem kompromisszum. N≈ëi edz√©sterv form√°hoz, er≈ëh√∂z, jobb k√∂z√©rzethez ‚Äî
            neked, az id≈ëbeoszt√°sodhoz igaz√≠tva.
          </p>

          <div class="hero-actions">
            <a class="btn primary interactive" href="#kapcsolat">Ingyenes konzult√°ci√≥</a>
            <a class="btn interactive" href="#csomagok">Csomagok</a>
            <a class="btn ghost interactive" href="https://tally.so/r/LZpRXG" target="_blank" rel="noopener">√çrj v√©lem√©nyt</a>
          </div>

          <div class="meta-row">
            <div class="meta-pill">üìç [V√°ros / Terem neve]</div>
            <div class="meta-pill">‚è±Ô∏è [Id≈ëtartamok]</div>
            <div class="meta-pill">üí¨ WhatsApp/Instagram: @fitnesslady</div>
          </div>
        </div>

        <div class="hero-stack">
          <!-- R√≥lam -->
          <div class="glass interactive about-card reveal" data-delay="1">
            <div class="about-head">
              <div class="about-title">R√≥lam</div>
              <div class="tag">Coach</div>
            </div>
            <p class="about-text">
              R√∂vid bemutatkoz√≥: ki vagy, miben seg√≠tesz, mi a m√≥dszered (2‚Äì3 mondat).
              C√©l: pr√©mium, bizalomkelt≈ë, ‚Äúk√©zben van‚Äù √©rz√©s.
            </p>
          </div>

          <!-- Mit kapsz pontosan -->
          <div class="glass interactive what-card reveal" data-delay="2">
            <div class="about-head">
              <div class="about-title">Mit kapsz pontosan?</div>
              <div class="tag">Pr√≥ba verzi√≥</div>
            </div>

            <div class="what-grid">
              <div class="mini">
                <b>Edz√©s</b>
                <span>Heti terv + progresszi√≥. R√∂vid, tarthat√≥ strukt√∫ra.</span>
              </div>
              <div class="mini">
                <b>T√°pl√°lkoz√°s</b>
                <span>Egyszer≈± rendszer a napjaidhoz igaz√≠tva.</span>
              </div>
              <div class="mini">
                <b>Kapcsolat</b>
                <span>Visszajelz√©s, finomhangol√°s, t√°mogat√°s.</span>
              </div>
              <div class="mini">
                <b>F√≥kusz</b>
                <span>Form√°sod√°s ‚Ä¢ er≈ë ‚Ä¢ k√∂z√©rzet ‚Äî c√©lhoz igaz√≠tva.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- CSOMAGOK -->
  <section id="csomagok" class="section">
    <div class="container">
      <div class="section-title reveal">Csomagok</div>
      <p class="section-sub reveal" data-delay="1">
        V√°lassz a c√©lod √©s id≈ëbeoszt√°sod alapj√°n. Pr√©mium √©rzet, tiszta strukt√∫ra, stabil rendszer.
      </p>

      <div class="packages">
        <!-- Start -->
        <article class="glass interactive pkg reveal" data-delay="1">
          <div class="pkg-top">
            <h3>Start</h3>
            <span class="tag">Aj√°nlott: 4 h√©t</span>
          </div>
          <p>Ha kell egy tiszta terv √©s lend√ºlet.</p>
          <ul class="list">
            <li><span class="check"></span> Szem√©lyre szabott edz√©sterv</li>
            <li><span class="check"></span> Alap t√°pl√°lkoz√°si keretrendszer</li>
            <li><span class="check"></span> 1√ó kontroll / m√≥dos√≠t√°s</li>
          </ul>
          <div class="pkg-actions">
            <a class="btn buy-btn interactive" href="#" onclick="alert('V√°s√°rl√°s linket k√©s≈ëbb tessz√ºk be (Stripe/Payrexx).'); return false;">V√°s√°rl√°s</a>
            <a class="btn info-btn interactive" href="#kapcsolat">√ârdekel</a>
          </div>
        </article>

        <!-- Balance -->
        <article class="glass interactive pkg reveal" data-delay="2" style="border-color: rgba(255,79,216,.22);">
          <div class="pkg-top">
            <h3>Balance</h3>
            <span class="tag" style="color:#1b0717;background:linear-gradient(135deg,#ffd8a8,#ff88e6);border-color:rgba(255,255,255,.25);">Legn√©pszer≈±bb</span>
          </div>
          <p>Form√°l√≥d√°s + er≈ë, folyamatos visszajelz√©ssel.</p>
          <ul class="list">
            <li><span class="check"></span> Edz√©s + t√°pl√°lkoz√°s rendszer</li>
            <li><span class="check"></span> Heti k√∂vet√©s / finomhangol√°s</li>
            <li><span class="check"></span> Szok√°sok + napi mini c√©lok</li>
          </ul>
          <div class="pkg-actions">
            <a class="btn buy-btn interactive" href="#" onclick="alert('V√°s√°rl√°s linket k√©s≈ëbb tessz√ºk be (Stripe/Payrexx).'); return false;">V√°s√°rl√°s</a>
            <a class="btn info-btn interactive" href="#kapcsolat">√ârdekel</a>
          </div>
        </article>

        <!-- Pro -->
        <article class="glass interactive pkg reveal" data-delay="3">
          <div class="pkg-top">
            <h3>Pro</h3>
            <span class="tag">Aj√°nlott: 6‚Äì8 h√©t</span>
          </div>
          <p>Maxim√°lis t√°mogat√°s, nem t√∫ler≈ëltet√©s.</p>
          <ul class="list">
            <li><span class="check"></span> Teljes szem√©lyre szab√°s</li>
            <li><span class="check"></span> Gyakoribb kontroll + √ºtemez√©s</li>
            <li><span class="check"></span> Teljes√≠tm√©ny + forma f√≥kusz</li>
          </ul>
          <div class="pkg-actions">
            <a class="btn buy-btn interactive" href="#" onclick="alert('V√°s√°rl√°s linket k√©s≈ëbb tessz√ºk be (Stripe/Payrexx).'); return false;">V√°s√°rl√°s</a>
            <a class="btn info-btn interactive" href="#kapcsolat">√ârdekel</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- HOGYAN M≈∞K√ñDIK -->
  <section id="hogyan" class="section">
    <div class="container">
      <div class="section-title reveal">Hogyan m≈±k√∂dik?</div>
      <p class="section-sub reveal" data-delay="1">Egyszer≈±, k√∂vethet≈ë rendszer ‚Äî a val√≥ √©lethez igaz√≠tva.</p>

      <div class="packages" style="grid-template-columns: 1fr 1fr;">
        <article class="glass interactive pkg reveal" data-delay="1">
          <div class="pkg-top">
            <h3>Edz√©s</h3>
            <span class="tag">Strukt√∫ra</span>
          </div>
          <ul class="list">
            <li><span class="check"></span> Gyakorlatok le√≠r√°ssal</li>
            <li><span class="check"></span> Progresszi√≥ ‚Äî mikor l√©psz tov√°bb</li>
            <li><span class="check"></span> Aj√°nlott √ºtemez√©s</li>
            <li><span class="check"></span> Fenntarthat√≥ terhel√©s</li>
          </ul>
        </article>

        <article class="glass interactive pkg reveal" data-delay="2">
          <div class="pkg-top">
            <h3>T√°pl√°lkoz√°s</h3>
            <span class="tag">Tarthat√≥</span>
          </div>
          <ul class="list">
            <li><span class="check"></span> Egyszer≈±, tarthat√≥ rend</li>
            <li><span class="check"></span> A napirendedhez igaz√≠tva</li>
            <li><span class="check"></span> Rendszeres finomhangol√°s</li>
            <li><span class="check"></span> Stabil energi√°k</li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <!-- V√âLEM√âNYEK -->
  <section id="velemenyek" class="section">
    <div class="container">
      <div class="reviews-head reveal">
        <div>
          <div class="section-title" style="margin-bottom:6px;">V√©lem√©nyek</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <div class="rating" id="avgRating" title="Kattints az anim√°ci√≥hoz" aria-label="√Åtlag √©rt√©kel√©s">
              <span class="star" style="--i:1">‚òÖ</span>
              <span class="star" style="--i:2">‚òÖ</span>
              <span class="star" style="--i:3">‚òÖ</span>
              <span class="star" style="--i:4">‚òÖ</span>
              <span class="star" style="--i:5">‚òÖ</span>
              <span class="rating-text" id="avgText">‚Äî</span>
            </div>
            <span style="color:var(--muted2); font-size:13px;" id="reviewsMeta">Bet√∂lt√©s‚Ä¶</span>
          </div>
        </div>

        <div class="reviews-actions">
          <a class="btn primary interactive" href="https://tally.so/r/LZpRXG" target="_blank" rel="noopener">√çrj v√©lem√©nyt</a>
          <button class="btn interactive" id="refreshBtn" type="button">Friss√≠t√©s</button>
        </div>
      </div>

      <div class="glass interactive review-carousel reveal" data-delay="1" id="reviewCarousel">
        <div class="review-track" id="reviewTrack" aria-label="V√©lem√©nyek carousel">
          <article class="review-card">
            <div class="top">
              <span>Bet√∂lt√©s‚Ä¶</span>
              <span> </span>
            </div>
            <p class="text">A v√©lem√©nyek hamarosan megjelennek.</p>
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          </article>
        </div>
        <div class="review-dots" id="reviewDots" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- FAQ / AFSZ -->
  <section id="faq" class="section">
    <div class="container">
      <div class="section-title reveal">AFSZ</div>
      <p class="section-sub reveal" data-delay="1">
        Az √Åltal√°nos Szerz≈ëd√©si Felt√©telek kattint√°sra ny√≠lnak meg egy pr√©mium modalban (nem fixen az oldalon).
      </p>

      <div class="glass interactive pkg reveal" data-delay="2">
        <div class="pkg-top">
          <h3>√Åltal√°nos Szerz≈ëd√©si Felt√©telek</h3>
          <span class="tag">Modal</span>
        </div>
        <p>
          A r√©szletek megtekint√©s√©hez kattints az al√°bbi gombra.
        </p>
        <div class="pkg-actions" style="grid-template-columns: 1fr;">
          <button class="btn primary interactive" id="openAfszBtn" type="button" aria-haspopup="dialog" aria-controls="afszModalOverlay">
            √ÅFSZ megnyit√°sa
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- KAPCSOLAT -->
  <section id="kapcsolat" class="section">
    <div class="container">
      <div class="section-title reveal">Kapcsolat</div>
      <p class="section-sub reveal" data-delay="1">Ingyenes konzult√°ci√≥hoz √≠rj WhatsAppon vagy Instagramon.</p>

      <div class="glass interactive pkg reveal" data-delay="2" style="display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between;">
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn interactive" href="#" onclick="alert('Itt majd WhatsApp link lesz'); return false;">WhatsApp</a>
          <a class="btn interactive" href="#" onclick="alert('Itt majd Instagram link lesz'); return false;">Instagram</a>
        </div>
        <div style="color:var(--muted); font-size:13px;">
          üìç [V√°ros / Terem neve] ‚Ä¢ ‚è±Ô∏è [Id≈ëtartamok] ‚Ä¢ @fitnesslady
        </div>
      </div>
    </div>
  </section>

  <!-- AFSZ MODAL (hidden until click) -->
  <div class="modal-overlay" id="afszModalOverlay" role="dialog" aria-modal="true" aria-labelledby="afszModalTitle" aria-hidden="true">
    <div class="glass modal" role="document">
      <div class="modal-header">
        <h2 class="modal-title" id="afszModalTitle">√Åltal√°nos Szerz≈ëd√©si Felt√©telek (√ÅFSZ)</h2>
        <button class="modal-close interactive" id="closeAfszBtn" type="button" aria-label="Bez√°r√°s">‚úï</button>
      </div>

      <div class="modal-body" id="afszModalBody">
        <p><b>Hat√°lyos:</b> 2026-02-10</p>
        <p><b>Weboldal / M√°rka:</b> FitnessLady</p>
        <p><b>Szolg√°ltat√≥:</b> T√ºske Farkas Edina (FitnessLady)</p>
        <p><b>Sz√©khely:</b> 3930 Visp, Mondstrasse 6, Sv√°jc</p>
        <p><b>E-mail:</b> fitnesslady92@gmail.com</p>
        <p><b>Deviza:</b> HUF √©s CHF</p>
        <p><b>Fizet√©si m√≥dok:</b> nemzetk√∂zi utal√°s, TWINT, Payrexx</p>

        <h3>1. Fogalmak</h3>
        <p><b>Szolg√°ltat√≥:</b> T√ºske Farkas Edina (FitnessLady), aki a szolg√°ltat√°st ny√∫jtja.<br>
           <b>Felhaszn√°l√≥ / V√°s√°rl√≥:</b> aki a weboldalon szolg√°ltat√°st ig√©nybe vesz vagy v√°s√°rol.<br>
           <b>Szolg√°ltat√°s:</b> online edz√©sanyagok, programok, csomagok, digit√°lis tartalmak a weboldalon le√≠rtak szerint.<br>
           <b>Digit√°lis tartalom:</b> online el√©rhet≈ë vagy let√∂lthet≈ë anyag (pl. vide√≥, program, √∫tmutat√≥).</p>

        <h3>2. A szolg√°ltat√°s le√≠r√°sa</h3>
        <ul class="list">
          <li><span class="check"></span> A csomagok tartalm√°t √©s id≈ëtartam√°t a csomagle√≠r√°s tartalmazza.</li>
          <li><span class="check"></span> A szolg√°ltat√°s online form√°ban √©rhet≈ë el, hozz√°f√©r√©st v√°s√°rl√°s ut√°n biztos√≠tunk.</li>
          <li><span class="check"></span> A tartalmak friss√≠thet≈ëk, a megv√°s√°rolt csomag l√©nyegi √©rt√©k√©nek csorb√≠t√°sa n√©lk√ºl.</li>
        </ul>

        <h3>3. Megrendel√©s √©s szerz≈ëd√©sk√∂t√©s</h3>
        <ul class="list">
          <li><span class="check"></span> V√°s√°rl√°s: csomag kiv√°laszt√°sa + fizet√©s.</li>
          <li><span class="check"></span> Szerz≈ëd√©s: sikeres fizet√©ssel √©s/vagy visszaigazol√°ssal j√∂n l√©tre.</li>
          <li><span class="check"></span> Val√≥s adatok megad√°sa k√∂telez≈ë.</li>
        </ul>

        <h3>4. D√≠jaz√°s √©s fizet√©s</h3>
        <ul class="list">
          <li><span class="check"></span> Deviza: HUF √©s CHF.</li>
          <li><span class="check"></span> Fizet√©s: nemzetk√∂zi utal√°s, TWINT, Payrexx.</li>
          <li><span class="check"></span> Sikeres fizet√©s ut√°n hozz√°f√©r√©st biztos√≠tunk.</li>
        </ul>

        <h3>5. Hozz√°f√©r√©s, technikai felt√©telek</h3>
        <ul class="list">
          <li><span class="check"></span> Internet √©s kompatibilis eszk√∂z sz√ºks√©ges.</li>
          <li><span class="check"></span> √Åtmeneti kies√©s el≈ëfordulhat (karbantart√°s/k√ºls≈ë hiba).</li>
          <li><span class="check"></span> Hozz√°f√©r√©si adatok v√©delme a v√°s√°rl√≥ felel≈ëss√©ge.</li>
        </ul>

        <h3>6. Lemond√°s, el√°ll√°s, visszat√©r√≠t√©s</h3>
        <ul class="list">
          <li><span class="check"></span> Digit√°lis tartalomn√°l a hozz√°f√©r√©s megkezd√©se ut√°n a visszat√©r√≠t√©s korl√°tozott lehet.</li>
          <li><span class="check"></span> Megkezd√©s el≈ëtt, hozz√°f√©r√©s-√°tad√°s n√©lk√ºl: egyedi elb√≠r√°l√°s.</li>
          <li><span class="check"></span> Tart√≥s el√©rhetetlens√©gn√©l ar√°nyos j√≥v√°√≠r√°s/visszat√©r√≠t√©s lehets√©ges.</li>
          <li><span class="check"></span> Ig√©ny: √≠r√°sban, rendel√©s azonos√≠t√≥val.</li>
        </ul>

        <h3>7. Felel≈ëss√©gkiz√°r√°s √©s eg√©szs√©g√ºgyi nyilatkozat</h3>
        <ul class="list">
          <li><span class="check"></span> A programok inform√°ci√≥s c√©l√∫ak, haszn√°lat saj√°t felel≈ëss√©gre t√∂rt√©nik.</li>
          <li><span class="check"></span> Eg√©szs√©gi alkalmass√°g eset√©n v√©gezhet≈ë, sz√ºks√©g eset√©n orvosi egyeztet√©ssel.</li>
          <li><span class="check"></span> Nem rendeltet√©sszer≈± haszn√°latb√≥l ered≈ë k√°rok√©rt felel≈ëss√©g nem v√°llalhat√≥.</li>
        </ul>

        <h3>8. Szerz≈ëi jog, felhaszn√°l√°si felt√©telek</h3>
        <ul class="list">
          <li><span class="check"></span> Anyagok a Szolg√°ltat√≥ szellemi tulajdon√°t k√©pezik.</li>
          <li><span class="check"></span> M√°sol√°s/megoszt√°s/tov√°bb√©rt√©kes√≠t√©s enged√©ly n√©lk√ºl tilos.</li>
          <li><span class="check"></span> Jogosulatlan megoszt√°s eset√©n hozz√°f√©r√©s megsz√ºntethet≈ë.</li>
        </ul>

        <h3>9. Adatkezel√©s (r√∂vid)</h3>
        <ul class="list">
          <li><span class="check"></span> A megrendel√©s teljes√≠t√©s√©hez sz√ºks√©ges adatokat kezelj√ºk.</li>
          <li><span class="check"></span> R√©szletek az adatkezel√©si t√°j√©koztat√≥ban (amennyiben el√©rhet≈ë).</li>
        </ul>

        <h3>10. Panaszkezel√©s, vitarendez√©s</h3>
        <ul class="list">
          <li><span class="check"></span> Panasz: fitnesslady92@gmail.com</li>
          <li><span class="check"></span> Ir√°nyad√≥ jog: sv√°jci jog. Illet√©kess√©g: Sv√°jc, Valais/VS (Visp).</li>
        </ul>

        <h3>11. Z√°r√≥ rendelkez√©sek</h3>
        <ul class="list">
          <li><span class="check"></span> Az √ÅFSZ m√≥dos√≠that√≥, k√∂zz√©t√©tellel hat√°lyos.</li>
          <li><span class="check"></span> A m√°r megv√°s√°rolt szolg√°ltat√°sokra a v√°s√°rl√°skor hat√°lyos √ÅFSZ ir√°nyad√≥ (kiv√©ve jogszab√°ly).</li>
        </ul>

        <p style="margin-top:14px; color:var(--muted2); font-size:12.8px;">
          T√ºske web design
        </p>
      </div>
    </div>
  </div>

  <footer style="padding: 18px 0 60px; border-top:1px solid rgba(255,255,255,.08); background: rgba(10,8,14,.55); backdrop-filter: blur(10px);">
    <div class="container" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; color:rgba(255,255,255,.70); font-size:13px;">
      <div>¬© <span id="y"></span> Fitness Lady</div>
      <div>T√ºske web design</div>
    </div>
  </footer>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();

    /* ===== Scroll performance: glow/hover anim OFF scroll k√∂zben (AZ √úVEG MARAD) ===== */
    (() => {
      let t = null;
      const onScroll = () => {
        if(!document.body.classList.contains('is-scrolling')) {
          document.body.classList.add('is-scrolling');
        }
        window.clearTimeout(t);
        t = window.setTimeout(() => {
          document.body.classList.remove('is-scrolling');
        }, 140);
      };
      window.addEventListener('scroll', onScroll, { passive: true });
    })();

    /* ========= Mobile menu ========= */
    const menuBtn = document.getElementById("menuBtn");
    let open = false;

    menuBtn?.addEventListener("click", () => {
      open = !open;
      if(open){
        const nav = document.createElement("div");
        nav.id = "mobileNav";
        nav.style.position = "fixed";
        nav.style.top = "64px";
        nav.style.left = "14px";
        nav.style.right = "14px";
        nav.style.zIndex = "60";
        nav.style.background = "rgba(20,12,26,.72)";
        nav.style.border = "1px solid rgba(255,255,255,.10)";
        nav.style.borderRadius = "18px";
        nav.style.backdropFilter = "blur(14px)";
        nav.style.boxShadow = "0 20px 70px rgba(0,0,0,.55)";
        nav.style.padding = "12px";
        nav.innerHTML = `
          <a href="#csomagok" style="display:block; padding:10px 10px; color:rgba(255,255,255,.86)">Csomagok</a>
          <a href="#hogyan" style="display:block; padding:10px 10px; color:rgba(255,255,255,.86)">Hogyan m≈±k√∂dik?</a>
          <a href="#velemenyek" style="display:block; padding:10px 10px; color:rgba(255,255,255,.86)">V√©lem√©nyek</a>
          <a href="#faq" style="display:block; padding:10px 10px; color:rgba(255,255,255,.86)">AFSZ</a>
          <a href="#kapcsolat" style="display:block; padding:10px 10px; color:rgba(255,255,255,.86)">Kapcsolat</a>
        `;
        document.body.appendChild(nav);
      } else {
        document.getElementById("mobileNav")?.remove();
      }
    });

    document.addEventListener("click", (e) => {
      const nav = document.getElementById("mobileNav");
      if(!nav) return;
      if(e.target === menuBtn) return;
      if(nav.contains(e.target)) {
        nav.remove();
        open = false;
      }
    });

    /* ========= Touch ‚Äúactive‚Äù glow ========= */
    function enableTapGlow(selector=".interactive"){
      document.querySelectorAll(selector).forEach(el=>{
        el.addEventListener("touchstart", ()=>{
          el.classList.add("is-active");
          window.clearTimeout(el.__t);
          el.__t = window.setTimeout(()=>el.classList.remove("is-active"), 650);
        }, {passive:true});
      });
    }
    enableTapGlow();

    /* ========= Scroll reveal ========= */
    (() => {
      const els = document.querySelectorAll('.reveal');
      if(!els.length) return;
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.classList.add('is-visible');
            io.unobserve(e.target);
          }
        });
      }, { threshold: 0.12, rootMargin: "0px 0px -10% 0px" });
      els.forEach(el=>io.observe(el));
    })();

    /* ========= Active nav underline based on scroll ========= */
    (() => {
      const links = Array.from(document.querySelectorAll('.nav a'))
        .filter(a=>a.getAttribute('href')?.startsWith('#'));
      const sections = links
        .map(a => document.querySelector(a.getAttribute('href')))
        .filter(Boolean);

      if(!sections.length) return;

      const setActive = (id) => {
        links.forEach(a => a.classList.toggle('is-active', a.getAttribute('href') === `#${id}`));
      };

      const io = new IntersectionObserver((entries)=>{
        const visible = entries.filter(e=>e.isIntersecting).sort((a,b)=>b.intersectionRatio-a.intersectionRatio)[0];
        if(visible?.target?.id) setActive(visible.target.id);
      }, { threshold: [0.2, 0.35, 0.5] });

      sections.forEach(s=>io.observe(s));
    })();

    /* ========= Rating animation (tap/click) ========= */
    (() => {
      const r = document.getElementById('avgRating');
      if(!r) return;
      const kick = () => {
        r.classList.remove('is-anim');
        void r.offsetWidth;
        r.classList.add('is-anim');
      };
      r.addEventListener('click', kick);
      r.addEventListener('touchstart', kick, {passive:true});
    })();

    /* ========= AFSZ MODAL LOGIC ========= */
    (() => {
      const openBtn = document.getElementById('openAfszBtn');
      const overlay = document.getElementById('afszModalOverlay');
      const closeBtn = document.getElementById('closeAfszBtn');
      let lastFocus = null;

      if(!openBtn || !overlay || !closeBtn) return;

      const openModal = () => {
        lastFocus = document.activeElement;
        overlay.classList.add('is-open');
        overlay.setAttribute('aria-hidden', 'false');
        document.body.classList.add('modal-lock');
        closeBtn.focus({ preventScroll: true });
      };

      const closeModal = () => {
        overlay.classList.remove('is-open');
        overlay.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('modal-lock');
        if(lastFocus && typeof lastFocus.focus === 'function') lastFocus.focus({ preventScroll: true });
      };

      openBtn.addEventListener('click', openModal);

      closeBtn.addEventListener('click', closeModal);

      overlay.addEventListener('click', (e) => {
        // close only if clicked on overlay background, not inside modal content
        if(e.target === overlay) closeModal();
      });

      document.addEventListener('keydown', (e) => {
        if(overlay.classList.contains('is-open') && e.key === 'Escape') closeModal();
      });
    })();

    /* ========= Reviews: load from Google Sheets CSV + auto-slide carousel ========= */
    const SHEET_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vSlH-tTccqy_yetPGUaqZ3wULe74ZVSzCX6wA7kZV-iWDu0l1I4_IBjTFggNS2xpZFqQwTXj3mnZeag/pub?gid=0&single=true&output=csv";

    const reviewTrack = document.getElementById('reviewTrack');
    const reviewDots  = document.getElementById('reviewDots');
    const refreshBtn  = document.getElementById('refreshBtn');
    const avgText     = document.getElementById('avgText');
    const reviewsMeta = document.getElementById('reviewsMeta');

    function escapeHtml(s) {
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function normalize(s){ return String(s ?? "").trim().toLowerCase(); }

    function parseCSV(text){
      const rows = [];
      let row = [];
      let cur = "";
      let inQuotes = false;

      for(let i=0;i<text.length;i++){
        const c = text[i];
        const n = text[i+1];

        if(c === '"' && inQuotes && n === '"'){ cur += '"'; i++; continue; }
        if(c === '"'){ inQuotes = !inQuotes; continue; }

        if(c === ',' && !inQuotes){ row.push(cur); cur=""; continue; }
        if((c === '\n' || c === '\r') && !inQuotes){
          if(c === '\r' && n === '\n') i++;
          row.push(cur);
          rows.push(row);
          row = [];
          cur = "";
          continue;
        }
        cur += c;
      }
      if(cur.length || row.length){ row.push(cur); rows.push(row); }
      return rows;
    }

    function findHeaderIndex(headers, predicate){
      for(let i=0;i<headers.length;i++){
        if(predicate(normalize(headers[i]))) return i;
      }
      return -1;
    }

    function stars(n){
      const num = Number(n);
      if(!Number.isFinite(num)) return "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ";
      const r = Math.max(1, Math.min(5, Math.round(num)));
      return "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ".slice(0, r) + "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(0, 5-r);
    }

    let carouselController = null;

    function destroyCarousel(){
      if(carouselController?.destroy) carouselController.destroy();
      carouselController = null;
      reviewDots.innerHTML = "";
    }

    function initCarousel(){
      const cards = Array.from(reviewTrack.querySelectorAll('.review-card'));
      reviewDots.innerHTML = "";
      if(!cards.length) return;

      const dots = cards.map((_, i) => {
        const d = document.createElement('div');
        d.className = 'review-dot';
        d.addEventListener('click', () => scrollToIndex(i));
        reviewDots.appendChild(d);
        return d;
      });

      let idx = 0;
      let timer = null;
      let paused = false;
      let scrollTick = null;

      function updateDots(){
        dots.forEach((d,i)=>d.classList.toggle('is-active', i===idx));
      }

      function scrollToIndex(i){
        idx = (i + cards.length) % cards.length;
        reviewTrack.scrollTo({
          left: cards[idx].offsetLeft - reviewTrack.offsetLeft,
          behavior: 'smooth'
        });
        updateDots();
      }

      reviewTrack.addEventListener('scroll', () => {
        clearTimeout(scrollTick);
        scrollTick = setTimeout(() => {
          const center = reviewTrack.scrollLeft + reviewTrack.clientWidth * 0.2;
          let nearest = 0, best = Infinity;
          cards.forEach((c,i)=>{
            const dist = Math.abs((c.offsetLeft - reviewTrack.offsetLeft) - center);
            if(dist < best){ best = dist; nearest = i; }
          });
          idx = nearest;
          updateDots();
        }, 80);
      }, {passive:true});

      function start(){
        if(timer) clearInterval(timer);
        timer = setInterval(()=>{
          if(paused) return;
          scrollToIndex(idx + 1);
        }, 7000);
      }

      const carousel = document.getElementById('reviewCarousel');
      carousel.addEventListener('mouseenter', ()=>paused=true);
      carousel.addEventListener('mouseleave', ()=>paused=false);
      carousel.addEventListener('touchstart', ()=>paused=true, {passive:true});
      carousel.addEventListener('touchend', ()=>paused=false, {passive:true});

      updateDots();
      start();

      carouselController = {
        destroy(){
          if(timer) clearInterval(timer);
          timer = null;
        }
      };
    }

    function renderReviews(items){
      destroyCarousel();
      reviewTrack.innerHTML = "";

      if(!items.length){
        reviewTrack.innerHTML = `
          <article class="review-card">
            <div class="top"><span>Hamarosan</span><span></span></div>
            <p class="text">M√©g nincs j√≥v√°hagyott v√©lem√©ny.</p>
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          </article>
        `;
        initCarousel();
        return;
      }

      for(const it of items){
        const date = it.date ? escapeHtml(it.date) : "";
        reviewTrack.insertAdjacentHTML('beforeend', `
          <article class="review-card interactive">
            <div class="top">
              <span>${escapeHtml(it.name)}</span>
              <span>${date}</span>
            </div>
            <p class="text">${escapeHtml(it.text)}</p>
            <div class="stars">${escapeHtml(it.stars)}</div>
          </article>
        `);
      }

      enableTapGlow('.review-card.interactive');
      initCarousel();
    }

    async function loadReviews(){
      try{
        reviewsMeta.textContent = "Bet√∂lt√©s‚Ä¶";

        const url = SHEET_CSV_URL + (SHEET_CSV_URL.includes('?') ? '&' : '?') + 't=' + Date.now();
        const res = await fetch(url, { cache: 'no-store' });
        if(!res.ok) throw new Error("CSV fetch failed: " + res.status);

        const csvText = await res.text();
        const rows = parseCSV(csvText);
        if(rows.length < 2) throw new Error("Empty CSV");

        const headers = rows.shift();

        const idxText = findHeaderIndex(headers, h => h === 'v√©lem√©nyed' || h === 'v√©lem√©ny' || h.includes('v√©lem√©ny'));
        const idxApprove = findHeaderIndex(headers, h => h === 'megjelenhet?' || h.includes('megjelenhet'));
        const idxRating = findHeaderIndex(headers, h => h === 'mennyire' || h === 'mennyire v' || h.startsWith('mennyire'));
        const idxDate = findHeaderIndex(headers, h => h === 'submitted at' || h.includes('submitted'));
        const idxName = findHeaderIndex(headers, h => h === 'n√©v' || h === 'name' || h.includes('n√©v'));

        if(idxText === -1 || idxApprove === -1){
          throw new Error("Missing required columns (V√©lem√©ny / Megjelenhet?)");
        }

        const items = [];
        let ratingSum = 0;
        let ratingCount = 0;

        for(const r of rows){
          const approved = normalize(r[idxApprove]);
          if(approved !== 'igen') continue;

          const text = String(r[idxText] ?? "").trim();
          if(!text) continue;

          const ratingRaw = idxRating !== -1 ? String(r[idxRating] ?? "").trim() : "";
          const ratingNum = Number(ratingRaw);
          const starsStr = stars(ratingNum);

          if(Number.isFinite(ratingNum)){
            ratingSum += Math.max(1, Math.min(5, ratingNum));
            ratingCount += 1;
          }

          const dateRaw = idxDate !== -1 ? String(r[idxDate] ?? "").trim() : "";
          const date = dateRaw ? dateRaw.replace("T"," ").replace("Z","") : "";

          const nameRaw = idxName !== -1 ? String(r[idxName] ?? "").trim() : "";
          const name = nameRaw || "Vend√©g";

          items.push({ text, stars: starsStr, date, name });
        }

        items.sort((a,b)=> (b.date || "").localeCompare(a.date || ""));

        if(ratingCount > 0){
          const avg = Math.round((ratingSum / ratingCount) * 10) / 10;
          avgText.textContent = `${avg} ‚Ä¢ ${ratingCount} √©rt√©kel√©s`;
        } else {
          avgText.textContent = `${items.length} v√©lem√©ny`;
        }

        reviewsMeta.textContent = items.length ? `${items.length} j√≥v√°hagyott v√©lem√©ny` : "Nincs m√©g j√≥v√°hagyott v√©lem√©ny";
        renderReviews(items.slice(0, 12));
      }catch(err){
        console.error(err);
        avgText.textContent = "‚Äî";
        reviewsMeta.textContent = "Nem siker√ºlt bet√∂lteni";
        renderReviews([]);
      }
    }

    refreshBtn?.addEventListener('click', loadReviews);
    loadReviews();
  </script>
</body>
</html>
